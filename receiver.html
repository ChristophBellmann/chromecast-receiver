<!DOCTYPE html><html><head><meta charset="utf-8"/><title>Lowâ€‘Latency Receiver v4.0</title><script src="https://www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script><script src="https://www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework_controls_dpad_tv.js"></script><style>:root{--accent:#0af}*{box-sizing:border-box;margin:0}html,body{width:100%;height:100%;overflow:hidden;background:#000;font-family:system-ui,sans-serif}#preIntro,#aboutBox,#splash{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}#preIntro{flex-direction:column;z-index:30;transition:opacity .1s}#pi-version{color:#fff;font-size:2.4em;font-weight:600;opacity:0;transition:opacity .1s}#pi-wheel{opacity:0;transition:opacity .1s}#pi-wheel canvas{width:60vmin;height:60vmin}#splash{flex-direction:column;z-index:0;background:#000}#splash img{max-width:100%;height:100%;object-fit:cover;opacity:.4}#splash #version{position:absolute;bottom:1em;color:#fff;font-size:1.1em}#aboutBox{z-index:10;flex-direction:column;background:transparent}#aboutPanel{background:rgba(34,34,34,.85);border:4px solid var(--accent);border-radius:16px;padding:2em 3em;color:#fff;text-align:center;min-width:50vw;box-shadow:0 0 18px #000}#menu{position:absolute;top:1em;left:50%;transform:translateX(-50%);display:flex;gap:.8em;padding:.8em 1.1em;background:rgba(0,0,0,.65);border-radius:10px;z-index:20;box-shadow:0 0 10px #000}#menu button{background:#fff;border:none;border-radius:8px;padding:.5em 1.3em;font-size:1em;transition:transform .15s}#menu button.sel{outline:3px solid var(--accent)}#menu button.pressed{transform:scale(.9)}</style></head><body tabindex="0"><div id="preIntro"><div id="pi-version">v4.0</div><div id="pi-wheel"><canvas id="wheelCanvas"></canvas></div></div><div id="splash"><img src="https://christophbellmann.github.io/my-cast-receiver/splash-0.1.png" alt="Splash Background"><div id="version"></div></div><div id="aboutBox"><div id="menu"><button id="btn-stream">Stream</button><button id="btn-info">Info</button><button id="btn-time">Uhrzeit</button></div><div id="aboutPanel"></div></div><cast-media-player id="player"></cast-media-player><script>(()=>{const $=e=>document.getElementById(e),sleep=t=>new Promise(r=>setTimeout(r,t));const pre=$('preIntro'),ver=$('pi-version'),wWrap=$('pi-wheel'),wCv=$('wheelCanvas'),wCtx=wCv.getContext('2d');const splash=$('splash');const about=$('aboutPanel');const streamBtn=$('btn-stream'),infoBtn=$('btn-info'),timeBtn=$('btn-time'),btns=[streamBtn,infoBtn,timeBtn];let sel=0,clockTimer=null;const MSG='<h1>Hi&nbsp;LindaÂ â€“Â selbstgebauterÂ PlayerÂ ðŸŽµ</h1><p>Liebeâ€¯GrÃ¼ÃŸe,â€¯Christoph</p>';about.innerHTML=MSG;/* wheel */const holes=[],ROT=15;function resizeWheel(){wCv.width=wCv.clientWidth;wCv.height=wCv.clientHeight;const r=Math.min(wCv.width,wCv.height)*.3,cx=wCv.width/2,cy=wCv.height/2;holes.length=0;for(let i=0;i<12;i++){const t=i/12*2*Math.PI,hr=r*(.15+.05*Math.random()),hx=cx+Math.cos(t)*r*.6*(.8+.2*Math.random()),hy=cy+Math.sin(t)*r*.6*(.8+.2*Math.random());holes.push({hx,hy,hr});}}let last=0,ang=0;function drawWheel(ts){if(!drawWheel.active)return;if(!last)last=ts;const dt=(ts-last)/1e3;last=ts;ang=(ang+dt*2*Math.PI/ROT)%(2*Math.PI);wCtx.clearRect(0,0,wCv.width,wCv.height);const r=Math.min(wCv.width,wCv.height)*.3,cx=wCv.width/2,cy=wCv.height/2;wCtx.save();wCtx.translate(cx,cy);wCtx.rotate(ang);wCtx.translate(-cx,-cy);wCtx.beginPath();wCtx.arc(cx,cy,r,0,2*Math.PI);wCtx.fillStyle='#2277cc';wCtx.fill();wCtx.lineWidth=r*.05;wCtx.strokeStyle='#1155aa';wCtx.stroke();wCtx.fillStyle='#114477';holes.forEach(h=>{wCtx.beginPath();wCtx.arc(h.hx,h.hy,h.hr,0,2*Math.PI);wCtx.fill();});wCtx.restore();requestAnimationFrame(drawWheel);}/* helpers */function select(i){btns[sel].classList.remove('sel');sel=(i%btns.length+btns.length)%btns.length;btns[sel].classList.add('sel');}function flash(b){b.classList.add('pressed');setTimeout(()=>b.classList.remove('pressed'),150);}function showInfo(){about.innerHTML=MSG;clearInterval(clockTimer);}function updateClock(){const n=new Date();about.innerHTML=`<h1>${n.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit',second:'2-digit'})}</h1><p>${n.toLocaleDateString()}</p>`;}function showClock(){updateClock();clearInterval(clockTimer);clockTimer=setInterval(updateClock,1000);}/* button actions */streamBtn.onclick=()=>{flash(streamBtn);splash.style.display='none';bus.send({type:'start'});} ;infoBtn.onclick=()=>{flash(infoBtn);showInfo();};timeBtn.onclick=()=>{flash(timeBtn);showClock();};/* keyboard */window.onkeydown=e=>{const k=e.key;if(k==='ArrowLeft')select(sel-1);else if(k==='ArrowRight')select(sel+1);else if(k==='Enter'||k==='OK')btns[sel].click();};/* intro sequence */window.onload=async()=>{document.body.focus();select(1);ver.style.opacity=1;await sleep(1000);ver.style.opacity=0;await sleep(200);resizeWheel();wWrap.style.opacity=1;drawWheel.active=true;requestAnimationFrame(drawWheel);await sleep(1000);wWrap.style.opacity=0;drawWheel.active=false;await sleep(200);pre.style.opacity=0;};window.addEventListener('resize',resizeWheel);/* cast */const STREAM_NS='urn:x-cast:com.example.stream';const ctx=cast.framework.CastReceiverContext.getInstance();ctx.getPlayerManager().setPlaybackConfig({autoResumeNumberOfSegments:1});ctx.start({disableIdleTimeout:true});const bus=ctx.getCastMessageBus(STREAM_NS);})();</script></body></html>
